version: 0.30.1
type: DeclarativeSource
check:
  type: CheckStream
  stream_names:
    - address
streams:
  - type: DeclarativeStream
    name: address
    primary_key:
      - uuid
    schema_loader:
      type: JsonFileSchemaLoader
      file_path: "./source_revel_new/schemas/address.json"
    retriever:
      type: SimpleRetriever
      requester:
        name: address
        type: HttpRequester
        url_base: https://savoypizza.revelup.com/resources/
        path: /Address
        http_method: GET
        request_parameters: {}
        request_headers: {}
        request_body_json: {}
        authenticator:
          type: ApiKeyAuthenticator
          header: API-Authentication
          api_token: '{{ config["api_key"] }}'
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer: ["objects"]
      paginator:
        url_base: "#/requester/url_base"
        type: DefaultPaginator
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: offset
        page_size_option:
          type: RequestOption
          field_name: limit
          inject_into: request_parameter
        pagination_strategy:
          type: OffsetIncrement
          page_size: 300

spec: 
  documentation_url: https://docs.airbyte.io/integrations/sources/ravel
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Ravel Source Spec
    type: object
    required:
      - api_key
      - start_date
    additionalProperties: true
    properties:
      api_key:
        type: string
        description: >-
          Enter Revel API Access Key.
        airbyte_secret: true
      start_date:
        type: string
        description: Enter Start date of getting data from Revel API.
        pattern: "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$"
        examples:
          - YYYY-MM-DDTh:m:s
          - "2022-07-20T01:01:01"
